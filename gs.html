<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/  dc: http://purl.org/dc/terms/  foaf: http://xmlns.com/foaf/0.1/  og: http://ogp.me/ns#  rdfs: http://www.w3.org/2000/01/rdf-schema#  schema: http://schema.org/  sioc: http://rdfs.org/sioc/ns#  sioct: http://rdfs.org/sioc/types#  skos: http://www.w3.org/2004/02/skos/core#  xsd: http://www.w3.org/2001/XMLSchema# ">
  <head>
          <!-- Google Tag Manager com--><noscript><iframe src='//www.googletagmanager.com/ns.html?id=GTM-5FQ8V7' height='0' width='0' style='display:none;visibility:hidden'></iframe></noscript>
        <meta charset="utf-8" />
<link rel="canonical" href="https://academy.creatio.com/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" />
<meta name="description" content="The Global Search Service integrates ElasticSearch with Creatio. It performs the following functions: Recording: Subscribes clients by creating an index in ElasticSearch and saves the connection between the index and the application. Disconnects clients by removing their index in ElasticSearch. Transporting: Participates in the indexing process by retrieving data from the database." />
<meta property="og:url" content="https://academy.creatio.com/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" />
<meta property="og:title" content="Global search" />
<meta property="og:description" content="The Global Search Service integrates ElasticSearch with Creatio. It performs the following functions: Recording: Subscribes clients by creating an index in ElasticSearch and saves the connection between the index and the application. Disconnects clients by removing their index in ElasticSearch. Transporting: Participates in the indexing process by retrieving data from the database." />
<meta name="Generator" content="Drupal 9 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="/docs/themes/custom/creatio/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="alternate" hreflang="en" href="https://academy.creatio.com/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" />

    <title>Global search | Creatio Academy</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Open+Sans:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" media="all" href="/docs/sites/en/files/css/css_gZX7idOfbMO0_UuSJWKXm6CkzfvEqA8hNnTLCy2PC0w.css" />
<link rel="stylesheet" media="all" href="/docs/sites/en/files/css/css_gSu9GfYiElV59siHLqzNuQc2mAPI-UO42XecR1lYlbE.css" />
<link rel="stylesheet" media="print" href="/docs/sites/en/files/css/css_7bXEEGKdZvadXz2DaydEzQj6YKQ6jKC6bwYaZ2tSgMc.css" />

    
  </head>
  <body class="path-node page-node-type-user-documentation">
          <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5FQ8V7');</script>
      <!-- End Google Tag Manager -->
    
        
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div class="creatio-page d-flex flex-column">
  
  <header role="banner">
          <div class="creatio-region creatio-region_top">
        <div class="creatio-container">
            <div class="region region-top">
    <div id="block-menutoggle" class="block block-simple-block block-simple-blockmenu-toggle">
  
    
      <div class="menu-toggle"><span> </span></div>

  </div>
<div id="block-logowhite-2" class="block block-simple-block block-simple-blocklogo-white">
  
    
      <p><a class="site-logo" href="/" rel="home"><img src="/docs/themes/custom/creatio/logo-white.svg" /></a></p>

  </div>
<div id="block-search" class="block block-simple-block block-simple-blocksearch">
  
    
      <div class="search">
<form action="/search" class="search-form" method="get"><input class="search-form__input" name="search" placeholder="Search" type="search" /><input class="search-form__button" type="submit" value="Search" /> </form>

<div class="search-toggle"> </div>
</div>

  </div>
<nav role="navigation" aria-labelledby="block-sites-menu" id="block-sites" class="block block-menu navigation menu--sites">
            
  <h2 class="visually-hidden" id="block-sites-menu">Sites</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="https://www.creatio.com/" rel="nofollow" target="_blank">Creatio</a>
              </li>
                <li class="menu-item">
        <a href="https://community.creatio.com" rel="nofollow" target="_blank">Community</a>
              </li>
                <li class="menu-item">
        <a href="https://marketplace.creatio.com" rel="nofollow" target="_blank">Marketplace</a>
              </li>
        </ul>
  


  </nav>
<div id="block-usermenu" class="block block-ts-user block-ts-user-menu-block">
  
    
      <ul class="user-menu">
      <li class="user-menu__item">
      <a class="user-menu__link" href="/docs/user/login?destination=/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search">Log in</a>
    </li>
  </ul>

  </div>
<div id="block-usermenumobile" class="block block-ts-user block-ts-user-menu-mobile-block">
  
    
      <ul class="user-menu-mobile">
      <li class="user-menu-mobile__item">
      <div class="user-menu-mobile__user user-menu-mobile__user_icon"></div>
      <ul class="user-menu-mobile__submenu">
        <li class="user-menu-mobile__subitem">
          <a class="user-menu-mobile__sublink" href="/docs/user/login?destination=/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search">Log in</a>
        </li>
      </ul>
    </li>
  </ul>

  </div>

  </div>

        </div>
      </div>
              <div class="creatio-region creatio-region_header">
        <div class="creatio-container">
            <div class="region region-header">
    <div id="block-logo" class="block block-simple-block block-simple-blocklogo">
  
    
      <p><a class="site-logo" href="/" rel="home"><img src="/docs/themes/custom/creatio/logo.svg" /></a></p>

  </div>
<nav role="navigation" aria-labelledby="block-mainnavigation-menu" id="block-mainnavigation" class="block block-menu navigation menu--main">
            
  <h2 class="visually-hidden" id="block-mainnavigation-menu">Main navigation</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="/docs/" data-drupal-link-system-path="&lt;front&gt;">Documentation</a>
              </li>
                <li class="menu-item">
        <a href="/docs/training" data-drupal-link-system-path="node/2203">Training</a>
              </li>
                <li class="menu-item">
        <a href="/docs/certification" data-drupal-link-system-path="node/1821">Certification &amp; Tests</a>
              </li>
        </ul>
  


  </nav>
<nav role="navigation" aria-labelledby="block-sites-2-menu" id="block-sites-2" class="block block-menu navigation menu--sites">
            
  <h2 class="visually-hidden" id="block-sites-2-menu">Sites</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="https://www.creatio.com/" rel="nofollow" target="_blank">Creatio</a>
              </li>
                <li class="menu-item">
        <a href="https://community.creatio.com" rel="nofollow" target="_blank">Community</a>
              </li>
                <li class="menu-item">
        <a href="https://marketplace.creatio.com" rel="nofollow" target="_blank">Marketplace</a>
              </li>
        </ul>
  


  </nav>

  </div>

        </div>
      </div>
              <div class="creatio-region creatio-region_breadcrumb">
        <div class="creatio-container">
            <div class="region region-breadcrumb">
    <div id="block-logowhite" class="block block-simple-block block-simple-blocklogo-white">
  
    
      <p><a class="site-logo" href="/" rel="home"><img src="/docs/themes/custom/creatio/logo-white.svg" /></a></p>

  </div>
<div id="block-breadcrumbnaviagtion" class="block block-ts-nav block-ts-nav-bread">
  
    
      <nav class="breadcrumb"><ol class="ts-nav-breadcrumb__list"><li class="ts-nav-breadcrumb__item"><a href="/docs/" class="ts-nav-breadcrumb__link" title="Documentation">Documentation</a></li>
<li class="ts-nav-breadcrumb__item"><a href="/docs/?vid_1=1" class="ts-nav-breadcrumb__link" title="User documentation">User documentation</a></li>
<li class="ts-nav-breadcrumb__item"><a href="/docs/user/on_site_deployment" class="ts-nav-breadcrumb__link" title="On-site deployment" hreflang="en">On-site deployment</a></li>
<li class="ts-nav-breadcrumb__item ts-nav-breadcrumb__item_mobile"><a href="/docs/user/on_site_deployment/containerized_components" class="ts-nav-breadcrumb__link" title="Сontainerized components" hreflang="en">Сontainerized components</a></li>
<li class="ts-nav-breadcrumb__item"><span class="ts-nav-breadcrumb__link ts-nav-breadcrumb__link_current" title="Global search">Global search</span></li>
</ol>
</nav>

  </div>
<div id="block-search-2" class="block block-simple-block block-simple-blocksearch">
  
    
      <div class="search">
<form action="/search" class="search-form" method="get"><input class="search-form__input" name="search" placeholder="Search" type="search" /><input class="search-form__button" type="submit" value="Search" /> </form>

<div class="search-toggle"> </div>
</div>

  </div>

  </div>

        </div>
      </div>
      </header>

  <div class="creatio-region creatio-region_main">
    <div class="creatio-container">
                <div class="region region-breadcrumb-mobile">
    <div id="block-breadcrumbnaviagtion-2" class="block block-ts-nav block-ts-nav-bread">
  
    
      <nav class="breadcrumb"><ol class="ts-nav-breadcrumb__list"><li class="ts-nav-breadcrumb__item"><a href="/docs/" class="ts-nav-breadcrumb__link" title="Documentation">Documentation</a></li>
<li class="ts-nav-breadcrumb__item"><a href="/docs/?vid_1=1" class="ts-nav-breadcrumb__link" title="User documentation">User documentation</a></li>
<li class="ts-nav-breadcrumb__item"><a href="/docs/user/on_site_deployment" class="ts-nav-breadcrumb__link" title="On-site deployment" hreflang="en">On-site deployment</a></li>
<li class="ts-nav-breadcrumb__item ts-nav-breadcrumb__item_mobile"><a href="/docs/user/on_site_deployment/containerized_components" class="ts-nav-breadcrumb__link" title="Сontainerized components" hreflang="en">Сontainerized components</a></li>
<li class="ts-nav-breadcrumb__item"><span class="ts-nav-breadcrumb__link ts-nav-breadcrumb__link_current" title="Global search">Global search</span></li>
</ol>
</nav>

  </div>

  </div>

      
      <main class="creatio-main" role="main">
                                                    
        <div class="creatio-content creatio-content_small">
          <div class="creatio-content__inner creatio-content__inner_bg">
                            <div class="region region-messages">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>

            
              <div class="region region-content">
    <div id="block-creatio-page-title" class="block block-core block-page-title-block">
  
    
      
  <h1 class="page-title"><span class="field field--name-title field--type-string field--label-hidden">Global search</span>
</h1>


  </div>
<div id="block-creatio-content" class="block block-system block-system-main-block">
  
    
      
<article data-history-node-id="254" role="article" about="/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" class="node node--type-user-documentation node--view-mode-full">

  
    

  
  <div class="node__content">
      <div class="layout layout--onecol">
    <div  class="layout__region layout__region--content">
      <div class="block block-ts-doc block-ts-doc-downloads">
  
    
      <a href="/docs/doc/print/pdf/node/254?ver=1346" target="_blank">PDF</a>
  </div>
<div class="block block-ts-doc block-ts-doc-versions">
  
    
        <div class="ts-doc-versions">
    <select class="ts-doc-versions__select">
                                                <option value="/docs/8-0/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" selected>Version 8.0</option>
                              <option value="/docs/7-18/user/on_site_deployment/containerized_components/global_search_shortcut/global_search">Version 7.18</option>
                              <option value="/docs/7-17/user/on_site_deployment/containerized_components/global_search_shortcut/global_search">Version 7.17</option>
          </select>
  </div>

  </div>

    </div>
  </div>
  <div class="layout layout--onecol">
    <div  class="layout__region layout__region--content">
      <div class="block block-layout-builder block-field-blocknodeuser-documentationfield-product">
  
    
      
  <div class="field field--name-field-product field--type-entity-reference field--label-above">
    <div class="field__label">Products</div>
          <div class="field__items">
              <div class="field__item">All Creatio products</div>
              </div>
      </div>

  </div>
<div class="block block-layout-builder block-field-blocknodeuser-documentationbody">
  
    
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><p>The Global Search Service integrates ElasticSearch with Creatio. It performs the following functions:</p>

<ul><li><strong>Recording</strong>:

	<ul><li>
		<p>Subscribes clients by creating an index in ElasticSearch and saves the connection between the index and the application.</p>
		</li>
		<li>
		<p>Disconnects clients by removing their index in ElasticSearch.</p>
		</li>
	</ul></li>
	<li><strong>Transporting</strong>:
	<ul><li>
		<p>Participates in the indexing process by retrieving data from the database.</p>
		</li>
	</ul></li>
</ul><p>The sequence of actions during the global search setup depends on the global search version you are going to use. We recommend always using the latest version of the global search service with the latest version of Creatio.</p>

<p>You can deploy the components of global search version 3.0 using <strong>Kubernetes orchestrator and Helm package manager</strong> or <strong>Docker</strong>.</p>

<p>We also recommend backing up ElasticSearch daily to ensure the correct operation of the service and to enable the restoration of data after failures, e. g., power outages.</p>

<p>If you have any questions during the setup, we recommend consulting the <a href="https://academy.creatio.com/documents?id=2342">Global search and deduplication FAQ</a>.</p>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Attention.</span> You need repository access to set up the current version of the global search service. Contact <a href="mailto:support@creatio.com">Creatio support</a> to verify your license and gain access to the repository.</p>
</div>

<h2>Set up the global search service using Kubernetes<a class="title-anchor" href="#title-254-30" id="title-254-30"> </a></h2>

<p>To set up the service, download the source files. <a href="https://academy.creatio.com/sites/default/files/documents/downloads/GlobalSearch/globalsearch-4.0.0.tgz">Download files</a>.</p>

<p>To install the service:</p>

<ol><li>Set up the target environment:
	<ol><li><strong>Kubernetes cluster</strong>. Learn more about setting up and managing the cluster in the <a href="https://kubernetes.io/docs/home/">Kubernetes documentation</a>.</li>
		<li><strong>Helm package manager</strong>. Learn more about installing the package manager in the <a href="https://helm.sh/docs/intro/install/">Helm documentation</a>.</li>
	</ol></li>
	<li>Unpack the <strong>values-onsite.yaml</strong> file from the source file archive and save the file to the same directory as the archive.</li>
	<li>Open the file. View the main parameters the file uses in the table below.</li>
	<li>Specify the public service URL in the format of http://k8s-node:30332 in the <span class="filled">global.searchService.url</span> variable.</li>
	<li>
	<p>If you <strong>have not installed</strong> Redis, RabbitMQ, ElasticSearch, and PostgreSQL service database yet, proceed to the next step.</p>

	<p>If you <strong>have already installed</strong> these services, for example, when setting up other containerized components, disable the installation of the services and set up the connection to existing services in the <strong>values-onsite.yaml</strong> source file of the global search service.</p>

	<div class="message">
	<p><span class="message__bold">Note.</span> For highly loaded environments, we recommend deploying ElasticSearch in a cluster. Learn more in <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/setup.html">ElasticSearch documentation</a>.</p>
	</div>

	<ul><li>
		<p>For <strong>Redis</strong>:</p>

		<ol><li>
			<p>Disable the service installation. To do this, specify <span class="filled">enabled: false</span> in the <span class="filled">redis</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
redis:
  enabled: false
</pre>
			</div>
			</div>
			</div>
			</li>
			<li>
			<p>Set up the connection to the previously installed Redis. To do this, specify the connection parameters in the <span class="filled">global.redis</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
global:
  redis:
    host: [host]
    port: [port]
    database: [database]
</pre>
			</div>
			</div>
			</div>

			<p>Where</p>

			<p>[host] is the address of the Redis server.</p>

			<p>[port] is the connection port of the Redis server.</p>

			<p>[database] is the name of the Redis database.</p>
			</li>
		</ol></li>
		<li>
		<p>For <strong>RabbitMQ</strong>:</p>

		<ol><li>
			<p>Disable the service installation. To do this, specify <span class="filled">enabled: false</span> in the <span class="filled">rabbitmq</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
rabbitmq:
  enabled: false
</pre>
			</div>
			</div>
			</div>
			</li>
			<li>
			<p>Set up the connection to the previously installed RabbitMQ. To do this, specify the connection parameters in the <span class="filled">global.rabbitmq</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
global:
  rabbitmq:
    host: [host]
    vhost: [vhost]
    port: [port]
    user: [user]
    password: [password]
</pre>
			</div>
			</div>
			</div>

			<p>Where</p>

			<p>[host] is the address of the RabbitMQ service.</p>

			<p>[vhost] is the virtual host address of the RabbitMQ service.</p>

			<p>[port] is the amqp connection port of RabbitMQ.</p>

			<p>[user] is the RabbitMQ user.</p>

			<p>[password] is the RabbitMQ user password.</p>
			</li>
		</ol></li>
		<li>
		<p>For <strong>PostgreSQL</strong> service database:</p>

		<ol><li>
			<p>Disable the PostgreSQL installation. To do this, specify <span class="filled">enabled: false</span> in the <span class="filled">postgresql</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
postgresql:
  enabled: false
</pre>
			</div>
			</div>
			</div>
			</li>
			<li>
			<p>Set up the connection to the PostgreSQL service database. To do this, specify the connection parameters in the <span class="filled">global.postgresql</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
global:
  db:
    user: [user]
    password: [password]
    database: [database]
    host: [host]
    port: [port]
</pre>
			</div>
			</div>
			</div>

			<p>Where</p>

			<p>[user] is the PostgreSQL user on whose behalf to connect to the database.</p>

			<p>[password] is the PostgreSQL user password.</p>

			<p>[database] is the PostgreSQL service database.</p>

			<p>[host] is the address of the PostgreSQL database.</p>

			<p>[port] is the port to connect to the database.</p>
			</li>
		</ol></li>
		<li>
		<p>For <strong>ElasticSearch</strong>:</p>

		<ol><li>
			<p>Disable ElasticSearch installation. To do this, specify <span class="filled">enabled: false</span> in the <span class="filled">elasticsearch</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
elasticsearch:
  enabled: false
</pre>
			</div>
			</div>
			</div>
			</li>
			<li>
			<p>Set up the connection to the previously installed ElasticSearch. To do this, specify the connection parameters in the <span class="filled">global.elasticsearch</span> section of the <strong>values-onsite.yaml</strong> file.</p>

			<div class="code">
			<div class="code__widgets">
			<div class="code__source">
			<pre class="prettyprint">
global:
  elasticsearch:
    url: [url]
    user: [user]
    password: [password] 
</pre>
			</div>
			</div>
			</div>

			<p>Where</p>

			<p>[user] is the ElasticSearch user.</p>

			<p>[password] is the ElasticSearch user password.</p>

			<p>[url] is the ElasticSearch service URL in the format of http://elasticsearch:9200.</p>
			</li>
		</ol></li>
	</ul></li>
	<li>Run the <span class="filled">helm install gs -f values-onsite.yaml globalsearch.tgz</span> command. As a result, Helm will install the global search service and selected dependencies.
	<div class="message">
	<p><span class="message__bold">Note.</span> By default, Helm deploys services with <a href="https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport">NodePort</a> type.</p>
	</div>
	</li>
</ol><p>The main parameters of the global search service the <strong>values.yaml</strong> file uses.</p>

<div class="table">
<table cellspacing="0"><tbody><tr><th>
			<p>Parameter</p>
			</th>
			<th>
			<p>Parameter description</p>
			</th>
		</tr><tr><td>
			<p>scheduler.env.fillQueueInterval</p>
			</td>
			<td>
			<p>The run interval for primary indexing, in milliseconds.</p>
			</td>
		</tr><tr><td>
			<p>worker.env.indexingCommandTimeout</p>
			</td>
			<td>
			<p>The timeout of the Creatio database query upon primary indexing, in seconds.</p>
			</td>
		</tr><tr><td>
			<p>workerSingle.env.indexingCommandTimeout</p>
			</td>
			<td>
			<p>The timeout of the Creatio database query upon instant indexing, in seconds.</p>
			</td>
		</tr><tr><td>
			<p>global.incrementDays</p>
			</td>
			<td>
			<p>The number of days within which to index the changed records during a single primary indexing iteration. Affects the indexing speed and Creatio database load. The higher the value, the faster the indexing and higher the load. The lower the value, the longer the indexing and lower the load.</p>
			</td>
		</tr><tr><td>
			<p>log4Net</p>
			</td>
			<td>
			<p>Logging settings.</p>
			</td>
		</tr><tr><td>
			<p>global.indexingContentLength</p>
			</td>
			<td>
			<p>The maximum length of text fields upon indexing.</p>
			</td>
		</tr><tr><td>
			<p>global.elasticsearch</p>
			</td>
			<td>
			<p>ElasticSearch connection parameters.</p>
			</td>
		</tr><tr><td>
			<p>global.searchService</p>
			</td>
			<td>
			<p>Public URL to the search-service in the format of http://k8s-node:30332.</p>
			</td>
		</tr><tr><td>
			<p>global.rabbitmq</p>
			</td>
			<td>
			<p>RabbitMQ connection settings.</p>
			</td>
		</tr><tr><td>
			<p>global.db</p>
			</td>
			<td>
			<p>The connection settings of the global search service's internal service database.</p>
			</td>
		</tr><tr><td>
			<p>global.redis</p>
			</td>
			<td>
			<p>Redis connection settings.</p>
			</td>
		</tr></tbody></table></div>

<h2>Set up the global search service in Docker<a class="title-anchor" href="#title-254-19" id="title-254-19"> </a></h2>

<p>The global search requires 2 dedicated physical or virtual servers (“server 1” and “server 2”) with Linux installed. Use the <a href="https://academy.creatio.com/docs/requirements/calculator">requirements calculator</a> to check the server requirements.</p>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Attention.</span> The global search setup procedure depends on the version you intend to install.</p>
</div>

<p>Learn more about the OS versions supported by Docker in the <a href="https://docs.docker.com/install/">Docker documentation</a>. Depending on your company needs, you can use either Docker Community Edition (CE) or Enterprise Edition (EE). Learn more in the <a href="https://docs.docker.com/install/overview/">Docker documentation</a>.</p>

<div class="message">
<p><span class="message__bold">Note.</span> The procedure below is relevant for global search service version 3.0. If you need to set up an earlier version of the global search, follow the procedure described in <a href="https://academy.creatio.com/documents/administration/7-16/set-global-search">Creatio 7.16 documentation</a>.</p>

<p>To <strong>update</strong> global search version 2.0 to version 3.0, run the <a href="https://docs.docker.com/compose/reference/down/">docker-compose down -v</a> command to delete all docker volumes on servers 1 and 2, then install and set up the services once again.</p>
</div>

<h3>Global search components<a class="title-anchor" href="#title-254-20" id="title-254-20"> </a></h3>

<p>Deploy on server 1:</p>

<ul><li>
	<p><a href="https://hub.docker.com/_/elasticsearch/">elasticsearch</a>. The search engine.</p>
	</li>
</ul><p>Deploy on server 2:</p>

<ul><li>
	<p><a href="https://hub.docker.com/_/postgres/">postgres</a>. The database for configuring the global search components.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/_/rabbitmq/">rabbitmq</a>. The message broker.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/_/redis/">redis</a>. The database used for caching and performance improvement.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-web-api/">gs-web-api</a>. The web service that configures global search components.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-web-indexing-service">gs-web-indexing-service</a>. The web service that processes requests to perform targeted indexing of Creatio data.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-search-service">gs-search-service</a>. An elasticsearch proxy web service for data search.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-scheduler/">gs-scheduler</a>. The scheduler of Creatio data indexing in ElasticSearch.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-worker/">gs-worker</a>. The component that indexes Creatio data in ElasticSearch as per the scheduler tasks.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-worker-replay/">gs-worker-replay</a>. The component that processes the indexing results (gs-worker results).</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-worker-single/">gs-worker-single</a>. The component that performs the targeted indexing of business process data in ElasticSearch upon a request from the business process.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-worker-single-replay/">gs-worker-single-replay</a>. The component that processes exceptions as part of the targeted indexing (gs-worker-single results).</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-worker-single-task/">gs-worker-single-task</a>. The component that schedules tasks for gs-worker-single.</p>
	</li>
	<li>
	<p><a href="https://hub.docker.com/r/bpmonline/gs-worker-queried-single-task">gs-worker-queried-single-task</a>. The component that generates tasks for gs-worker-single.</p>
	</li>
</ul><p>To set up the components, download the source files. <a href="https://github.com/Advance-Technologies-Foundation/gs-docker-compose/releases/tag/v4.0.0">Download files</a>.</p>

<p>The list of ports used by global search components:</p>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Attention.</span> If you are using a firewall, make sure the ports below are open and available.</p>
</div>

<div class="table">
<table cellspacing="0"><tbody><tr><th>
			<p>Component name</p>
			</th>
			<th>
			<p>Outgoing port</p>
			</th>
			<th>
			<p>Incoming port</p>
			</th>
			<th>
			<p>Notes</p>
			</th>
		</tr><tr><td>
			<p>gs-web-api</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>81</p>
			</td>
			<td>
			<p>Configure the incoming port using the WEB_API_PORT variable</p>
			</td>
		</tr><tr><td>
			<p>gs-web-indexing-service</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>82</p>
			</td>
			<td>
			<p>Configure the incoming port using the WEB_INDEXING_SERVICE_PORT variable</p>
			</td>
		</tr><tr><td>
			<p>gs-search-service</p>
			</td>
			<td>
			<p>9200</p>
			</td>
			<td>
			<p>83</p>
			</td>
			<td>
			<p>Configure the incoming port using the SEARCH_SERVICE_PORT variable</p>
			</td>
		</tr><tr><td>
			<p>gs-worker</p>
			</td>
			<td>
			<p>9200</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>Requires connection to the server where elasticsearch is located.</p>
			</td>
		</tr><tr><td>
			<p>gs-worker-single</p>
			</td>
			<td>
			<p>9200</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>Requires connection to the server where elasticsearch is located.</p>
			</td>
		</tr><tr><td>
			<p>elasticsearch</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>9200</p>
			</td>
			<td>
			<p> </p>
			</td>
		</tr></tbody></table></div>

<h3>Global search setup procedure<a class="title-anchor" href="#title-254-21" id="title-254-21"> </a></h3>

<ol><li>
	<p>Install Docker on a physical or virtual machine running Linux OS.</p>
	</li>
	<li>
	<p>Install Docker-Compose.</p>
	</li>
	<li>
	<p>Install ElasticSearch.</p>
	</li>
	<li>
	<p>Set up the container variables.</p>
	</li>
	<li>
	<p>Install and run the Global Search Service components.</p>
	</li>
	<li>
	<p>Enable the global search functionality in Creatio.</p>
	</li>
</ol><h4>Install Docker<a class="title-anchor" href="#title-254-22" id="title-254-22"> </a></h4>

<p>Install Docker on Linux to deploy global search components. The installation is covered in the <a href="https://docs.docker.com/install/linux/docker-ce/debian/">Docker documentation</a>.</p>

<p>Run the <strong>docker --version</strong> command on a Linux machine to verify the installed Docker version.</p>

<h4>Install Docker-Compose<a class="title-anchor" href="#title-254-23" id="title-254-23"> </a></h4>

<p>The installation of Docker-Compose is covered in the <a href="https://docs.docker.com/compose/install/">Docker documentation</a>.</p>

<h4>Install ElasticSearch<a class="title-anchor" href="#title-254-24" id="title-254-24"> </a></h4>

<div class="message">
<p><span class="message__bold">Note.</span> This guide covers the procedure for deploying ElasticSearch in Docker-Compose. You can also deploy ElasticSearch as OS daemon, which does not involve installing Docker and Docker-Compose. Learn more about the setup procedure in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docker.html">ElasticSearch documentation</a>.</p>
</div>

<p>To install ElasticSearch:</p>

<ol><li>
	<p>Go to the ElasticSearch installation server (server 1) and open the /opt directory.</p>
	</li>
	<li>
	<p>Download and unpack the archive with setup files to the directory. <a href="https://github.com/Advance-Technologies-Foundation/gs-docker-compose/releases/tag/v4.0.0">Download the archive</a>.</p>
	</li>
	<li>
	<p>Open the /opt/docker-compose/elasticsearch directory (where the components are located) and run the following command:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
docker-compose up -d</pre>
	</div>
	</div>
	</div>

	<p>The command might take up to several minutes to complete.</p>
	</li>
	<li>
	<p>Make sure that the log files do not contain any errors after the command is complete. To do this, run the following command:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
docker logs es-01</pre>
	</div>
	</div>
	</div>
	</li>
</ol><h4>Set up the container variables<a class="title-anchor" href="#title-254-25" id="title-254-25"> </a></h4>

<p>Configure the global search component containers via the file that contains the environment variables. The variables are stored in the /opt/compose/services/.env file. Edit this file to set the variables.</p>

<div class="table">
<table cellspacing="0"><tbody><tr><th>
			<p>Variable name</p>
			</th>
			<th>
			<p>Details</p>
			</th>
			<th>
			<p>Default value</p>
			</th>
		</tr><tr><td>
			<p>GS_ES_URL</p>
			</td>
			<td>
			<p>The external ElasticSearch host required for access from Creatio. Specify the IP address of the server where the ElasticSearch is deployed.</p>
			</td>
			<td>
			<p>http://elasticsearch-publicip:9200</p>
			</td>
		</tr><tr><td>
			<p>CURRENT_SERVER_IP</p>
			</td>
			<td>
			<p>The external IP address of the server where the global search components are deployed (server 2).</p>
			</td>
			<td>
			<p>10.0.0.1</p>
			</td>
		</tr></tbody></table></div>

<div class="message">
<p><span class="message__bold">Note.</span> To check the external IP address of the server, run the <span class="filled">hostname -I | awk '{ print $1 }'</span> command.</p>
</div>

<p>Additional variables that control the data indexing parameters in ElasticSearch</p>

<div class="table">
<table cellspacing="0"><tbody><tr><th>
			<p>Variable name</p>
			</th>
			<th>
			<p>Details</p>
			</th>
			<th>
			<p>Default value</p>
			</th>
		</tr><tr><td>
			<p>GS_DB_INCREMENT_DAYS</p>
			</td>
			<td>
			<p>Number of days to index per one scheduler iteration. ModifiedOn columns of Creatio records are used for comparison.</p>
			</td>
			<td>
			<p>500 days</p>
			</td>
		</tr><tr><td>
			<p>GS_DB_FILL_QUEUE_INTERVAL</p>
			</td>
			<td>
			<p>Creatio database data collection interval for the regular scheduler. The lower the variable, the higher the load on Creatio database and the faster the primary indexing.</p>
			</td>
			<td>
			<p>30000 (specified in milliseconds)</p>
			</td>
		</tr></tbody></table></div>

<h3>Run containers that have Global Search Service components<a class="title-anchor" href="#title-254-26" id="title-254-26"> </a></h3>

<div class="message message_warning">
<p><span class="message__bold message__bold_warning">Attention.</span> For the correct container operation, the UTC time on the Linux machine with Docker installed must correspond to the UTC time on the Creatio database server. The permissible deviation is up to five minutes. Otherwise, the global search might not index all records.</p>
</div>

<ol><li>
	<p>Go to the server that has the global search components (server 2) and open the /opt folder.</p>
	</li>
	<li>
	<p>Download and unpack the archive with setup files to the opened folder. <a href="https://github.com/Advance-Technologies-Foundation/gs-docker-compose/releases/tag/v4.0.0">Download the archive</a>.</p>
	</li>
	<li>
	<p>Open the /opt/compose/services folder and run the following command:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
docker-compose up -d</pre>
	</div>
	</div>
	</div>
	</li>
</ol><h4>Verify that containers ran successfully<a class="title-anchor" href="#title-254-27" id="title-254-27"> </a></h4>

<p>To see the running global search containers, use the following console command:</p>

<div class="code">
<div class="code__widgets">
<div class="code__source">
<pre class="prettyprint">
docker ps --filter "label=service=gs" -a --format "table {{.Names}}\t{{.Ports}}\t{{.Status}}\t{{.RunningFor}}"</pre>
</div>
</div>
</div>

<p>All currently running containers display the <strong>Up</strong> status.</p>

<h4>Logging<a class="title-anchor" href="#title-254-12" id="title-254-12"> </a></h4>

<p>By default, the container logging takes place in the stdout and stderr.</p>

<div class="message">
<p><span class="message__bold">Note.</span> The “docker logs --tail 100 gs-worker” command displays 100 last strings from the gs-worker container.</p>
</div>

<div class="message">
<p><span class="message__bold">Note.</span> The mysql or rabbitmq containers might become temporarily unavailable on start because they run after the rest of the containers. In this case, wait until a notification about the successful container connection and start appears in the log files: “Now listening on: http:/<span class="key">::</span>80 Application started. Press Ctrl+C to shut down.”</p>
</div>

<h2>Connect the global search service to Creatio<a class="title-anchor" href="#title-254-29" id="title-254-29"> </a></h2>

<h3>Actions on the server<a class="title-anchor" href="#title-254-14" id="title-254-14"> </a></h3>

<p>To connect global search to Creatio, take the following steps on the server where the global search components are located (server 2 for the service deployed in Docker):</p>

<ol><li>
	<p>Install the api-get install curl or yum install curl utility for HTTP queries.</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
apt-get install curl</pre>
	</div>
	</div>
	</div>
	</li>
	<li>
	<p>Execute the HTTP request to register the site in global search. Specify the following:</p>

	<ol><li>
		<p><span class="key">DATABASE_TYPE</span>: Creatio database type (mssql, postgresql, or oracle).</p>
		</li>
		<li>
		<p><span class="key">DATABASE_CONNECTION_STRING</span>: Creatio database connection string</p>
		</li>
		<li>
		<p><span class="key">SITE_NAME</span>: Creatio site name, e. g., my-test-site.</p>
		</li>
		<li>
		<p><span class="key">SERVER2_IP_ADDRESS</span> (only for Docker): the IP address of the Linux server where the global search components are deployed.</p>

		<p><span class="key">GS_WEB_API_URL</span> (only for Kubernetes): the IP address of the Linux server where the global search components are deployed.</p>

		<div class="SimpleTabContainer" data-itemid="JSON" data-title="JSON" id="Syntax_JSON">
		<div class="code">
		<div class="code__widgets">
		<div class="code__source" data-tab="Request for Docker">
		<pre class="prettyprint">
curl -v -X POST -d '{"databaseType": "[DATABASE_TYPE]", "databaseConnectionString": "[DATABASE_CONNECTION_STRING]"}' -H "Content-Type: application/json" http://[SERVER2_IP_ADDRESS]:81/sites/[SITE_NAME]*
</pre>
		</div>

		<div class="code__source" data-tab="Request for Kubernetes">
		<pre class="prettyprint">
curl -v -X POST -d '{"databaseType": "[DATABASE_TYPE]", "databaseConnectionString": "[DATABASE_CONNECTION_STRING]"}' -H "Content-Type: application/json" http:// [ GS_WEB_API_URL ]/sites/[SITE_NAME]*
</pre>
		</div>
		</div>
		</div>
		</div>

		<div class="message message_example">
		<p><span class="message__bold message__bold_example">Example for Microsoft SQL.</span></p>

		<p>For Docker:</p>

		<p>curl -v -X POST -d '{"databaseType": "mssql", "databaseConnectionString": "Server=myserver\\mssql2016; Database=my-test-site; User Id=my-login; Password='my-password'; Connection Timeout=10"}' -H "Content-Type: application/json" http://[SERVER2_IP_ADDRESS]:81/sites/my-test-site</p>

		<p>For Kubernetes:</p>

		<p>curl -v -X POST -d '{"databaseType": "mssql", "databaseConnectionString": "Server=myserver\\mssql2016; Database=my-test-site; User Id=my-login; Password='my-password'; Connection Timeout=10"}' -H "Content-Type: application/json" http:// [ GS_WEB_API_URL ] /sites/my-test-site</p>
		</div>

		<div class="message message_example">
		<p><span class="message__bold message__bold_example">Example for PostgreSQL.</span> server=[SERVER_IP];port=5432;database=[DB_NAME];user id=[USER_NAME];password=[PASSWORD];timeout=10;commandtimeout=400;maxpoolsize=1024</p>
		</div>
		</li>
	</ol></li>
	<li>
	<p>Execute the HTTP request to connect the search to the site. Specify the following:</p>

	<ol><li>
		<p><span class="key">SITE_NAME</span>: Creatio site name, e. g., my-test-site.</p>
		</li>
		<li>
		<p><span class="key">TEMPLATE_NAME</span>: the name of the search template used in ElasticSearch. View the available templates in the table below.</p>
		</li>
		<li>
		<p><span class="key">SERVER2_IP_ADDRESS</span> (only for Docker): the IP address of the Linux server where the global search components are deployed.</p>

		<p><span class="key">GS_WEB_API_URL</span> (only for Kubernetes): the IP address of the Linux server where the global search components are deployed.</p>

		<div class="SimpleTabContainer" data-itemid="JSON" data-title="JSON" id="Syntax_JSON">
		<div class="code">
		<div class="code__widgets">
		<div class="code__source" data-tab="Request for Docker">
		<pre class="prettyprint">
		
curl -v -X POST -d '{"templateName": "[TEMPLATE_NAME]"}' -H "Content-Type: application/json" http://[SERVER2_IP_ADDRESS]:81/sites/[SITE_NAME]/search</pre>
		</div>

		<div class="code__source" data-tab="Request for Kubernetes">
		<pre class="prettyprint">
curl -v -X POST -d '{"templateName": "[TEMPLATE_NAME]"}' -H "Content-Type: application/json" http:// [ GS_WEB_API_URL ] /sites/[SITE_NAME]/search
</pre>
		</div>
		</div>
		</div>
		</div>

		<div class="message message_example">
		<p><span class="message__bold message__bold_example">Example.</span></p>

		<p>For Docker:</p>

		<p>curl -v -X POST -d '{"templateName": "default.json"}' -H "Content-Type: application/json" http://[SERVER2_IP_ADDRESS]:81/sites/my-test-site/search</p>

		<p>For Kubernetes:</p>

		<p>curl -v -X POST -d '{"templateName": "default.json"}' -H "Content-Type: application/json" http:// [GS_WEB_API_URL] /sites/my-test-site/search</p>
		</div>
		</li>
	</ol><div class="message">
	<p><span class="message__bold">Note.</span> This request returns the URL of the index created in ElasticSearch. Save the URL and use it in the system setting installation SQL script below.</p>
	</div>
	</li>
</ol><div class="message message_warning">
<p><span class="message__bold message__bold_warning">Attention.</span> To change the search template, run the DELETE query at /sites/{siteName}/search, as well as the search connection HTTP request described above. This reindexes the entire site.</p>
</div>

<p>View the available search templates and their features in the table below:</p>

<div class="table">
<table cellspacing="0"><tbody><tr><th>
			<p> </p>
			</th>
			<th>
			<p>Old template (version 1.6)</p>
			</th>
			<th>
			<p>default.json</p>
			</th>
			<th>
			<p>ngram_2.json</p>
			</th>
			<th>
			<p>ngram_3.json</p>
			</th>
			<th>
			<p>without_ngram.json</p>
			</th>
		</tr><tr><td>
			<p>Search by partial match</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
		</tr><tr><td>
			<p>Search by misspelled words</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
		</tr><tr><td>
			<p>Search communication options by phone number (partial match)</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
		</tr><tr><td>
			<p>Search communication options (partial match)</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
		</tr><tr><td>
			<p>Search by word swapping</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
		</tr><tr><td>
			<p>Search by exact match</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>+</p>
			</td>
		</tr><tr><td>
			<p>Search by two characters</p>
			</td>
			<td>
			<p>–</p>
			</td>
			<td>
			<p>–</p>
			</td>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>–</p>
			</td>
			<td>
			<p>–</p>
			</td>
		</tr><tr><td>
			<p>Average search speed (lower is better)</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>1x</p>
			</td>
			<td>
			<p>13x</p>
			</td>
			<td>
			<p>7x</p>
			</td>
			<td>
			<p>&lt;1x</p>
			</td>
		</tr><tr><td>
			<p>Index size at elasticsearch (lower is better)</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>1x</p>
			</td>
			<td>
			<p>4x</p>
			</td>
			<td>
			<p>2.5x</p>
			</td>
			<td>
			<p>&lt;1x</p>
			</td>
		</tr><tr><td>
			<p>Primary indexing time (lower is better)</p>
			</td>
			<td>
			<p> </p>
			</td>
			<td>
			<p>1x</p>
			</td>
			<td>
			<p>1.8x</p>
			</td>
			<td>
			<p>1.4x</p>
			</td>
			<td>
			<p>&lt;1x</p>
			</td>
		</tr></tbody></table></div>

<h3>Settings in Creatio for Microsoft SQL DBMS<a class="title-anchor" href="#title-254-15" id="title-254-15"> </a></h3>

<ol><li>
	<p>Toggle the global search (GlobalSearch, GlobalSearch_V2, GlobalSearchRelatedEntityIndexing) feature in Creatio by running the following SQL script:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
DECLARE @GS_REIndexingFeature NVARCHAR(50) = 'GlobalSearchRelatedEntityIndexing';
DECLARE @GS_REIndexingFeatureId UNIQUEIDENTIFIER = (SELECT TOP 1 Id FROM Feature WHERE
Code = @GS_REIndexingFeature);

DECLARE @GlobalSearchFeature NVARCHAR(50) = 'GlobalSearch';
DECLARE @GlobalSearchFeatureId UNIQUEIDENTIFIER = (SELECT TOP 1 Id FROM Feature WHERE Code = @GlobalSearchFeature);

DECLARE @GlobalSearchV2Feature NVARCHAR(50) = 'GlobalSearch_V2';
DECLARE @GlobalSearchV2FeatureId UNIQUEIDENTIFIER = (SELECT TOP 1 Id FROM Feature WHERE Code = @GlobalSearchV2Feature);
DECLARE @allEmployeesId UNIQUEIDENTIFIER = 'A29A3BA5-4B0D-DE11-9A51-005056C00008';

IF (@GlobalSearchFeatureId IS NOT NULL)
 BEGIN
   IF EXISTS (SELECT * FROM AdminUnitFeatureState WHERE FeatureId = @GlobalSearchFeatureId)
     UPDATE AdminUnitFeatureState SET FeatureState = 1 WHERE FeatureId = @GlobalSearchFeatureId
    ELSE
     INSERT INTO AdminUnitFeatureState (SysAdminUnitId, FeatureState, FeatureId) VALUES (@allEmployeesId, '1', @GlobalSearchFeatureId)
 END;
ELSE
 BEGIN
   SET @GlobalSearchFeatureId = NEWID()
   INSERT INTO Feature (Id, Name, Code) VALUES (@GlobalSearchFeatureId, @GlobalSearchFeature, @GlobalSearchFeature)
   INSERT INTO AdminUnitFeatureState (SysAdminUnitId, FeatureState, FeatureId) VALUES (@allEmployeesId, '1', @GlobalSearchFeatureId)
 END;

IF (@GlobalSearchV2FeatureId IS NOT NULL)
 BEGIN
   IF EXISTS (SELECT * FROM AdminUnitFeatureState WHERE FeatureId = @GlobalSearchV2FeatureId)
     UPDATE AdminUnitFeatureState SET FeatureState = 1 WHERE FeatureId = @GlobalSearchV2FeatureId
    ELSE
     INSERT INTO AdminUnitFeatureState (SysAdminUnitId, FeatureState, FeatureId) VALUES (@allEmployeesId, '1',@GlobalSearchV2FeatureId)
 END;
ELSE
 BEGIN
   SET @GlobalSearchV2FeatureId = NEWID()
   INSERT INTO Feature (Id, Name, Code) VALUES (@GlobalSearchV2FeatureId, @GlobalSearchV2Feature, @GlobalSearchV2Feature)
   INSERT INTO AdminUnitFeatureState (SysAdminUnitId, FeatureState, FeatureId) VALUES (@allEmployeesId, '1',@GlobalSearchV2FeatureId)
 END;

IF (@GS_REIndexingFeatureId IS NOT NULL)
BEGIN
 IF EXISTS (SELECT * FROM AdminUnitFeatureState WHERE FeatureId = @GS_REIndexingFeatureId)
  UPDATE AdminUnitFeatureState SET FeatureState = 1 WHERE FeatureId = @GS_REIndexingFeatureId
  ELSE
  INSERT INTO AdminUnitFeatureState (SysAdminUnitId, FeatureState, FeatureId) VALUES (@allEmployeesId, '1', @GS_REIndexingFeatureId)
END;
ELSE
BEGIN
 SET @GS_REIndexingFeatureId = NEWID()
 INSERT INTO Feature (Id, Name, Code) VALUES (@GS_REIndexingFeatureId, @GS_REIndexingFeature, @GS_REIndexingFeature)
 INSERT INTO AdminUnitFeatureState (SysAdminUnitId, FeatureState, FeatureId) VALUES (@allEmployeesId, '1', @GS_REIndexingFeatureId)
END;
</pre>
	</div>
	</div>
	</div>
	</li>
	<li>
	<p>Set the values of the system settings:</p>

	<ol><li>
		<p>“GlobalSearchUrl:” the full path to ElasticSearch, including the index. The web-api returns this value if you request it to add site search.</p>

		<p>Example string for Docker: http://[SERVER2_IP_ADDRESS]:83/indexname.</p>

		<p>Example string for Kubernetes: http://[GS-SEARCH-SERVICE_URL] /indexname.</p>
		</li>
		<li>
		<p>“GlobalSearchConfigServiceURL:” the global search API URL.</p>

		<p>Default value for Docker: http://[SERVER2_IP_ADDRESS]:81.</p>

		<p>Default value for Kubernetes: http:// [GS_WEB_API_URL].</p>
		</li>
		<li>
		<p>“GlobalSearchIndexingApiUrl:” the instant indexing service URL.</p>

		<p>Default value for Docker: http://[SERVER2_IP_ADDRESS]:82.</p>

		<p>Default value for Kubernetes: http://[GS-WEB-INDEXING-SERVICE_URL].</p>

		<div class="SimpleTabContainer" data-itemid="JSON" data-title="JSON" id="Syntax_JSON">
		<div class="code">
		<div class="code__widgets">
		<div class="code__source" data-tab="For Docker">
		<pre class="prettyprint">
		
UPDATE SysSettingsValue
SET TextValue = [specify the URL to the ElasticSearch index, use a string of the following type: http://[SERVER2_IP_ADDRESS]:83/indexname]
WHERE SysSettingsId = (SELECT TOP 1 Id FROM SysSettings WHERE Code ='GlobalSearchUrl')

UPDATE SysSettingsValue
SET TextValue = [specify the URL to the Global Search Service, use a string of the following type: http://SERVER2_IP_ADDRESS:81]
WHERE SysSettingsId = (SELECT TOP 1 Id FROM SysSettings WHERE Code ='GlobalSearchConfigServiceUrl')

UPDATE SysSettingsValue
SET TextValue = [specify the URL to the Global Serch Indexing Service, use a string of the following type: http://SERVER2_IP_ADDRESS:82]
WHERE SysSettingsId = (SELECT TOP 1 Id FROM SysSettings WHERE Code ='GlobalSearchIndexingApiUrl')</pre>
		</div>

		<div class="code__source" data-tab="For Kubernetes">
		<pre class="prettyprint">
UPDATE SysSettingsValue 

SET TextValue = [specify the URL to the ElasticSearch index, use a string of the following type: http://[GS-SEARCH-SERVICE_URL]/indexname] 

WHERE SysSettingsId = (SELECT TOP 1 Id FROM SysSettings WHERE Code ='GlobalSearchUrl') 

 

UPDATE SysSettingsValue 

SET TextValue = [specify the URL to the Global Search Service, use a string of the following type: http:// GS_WEB_API_URL] 

WHERE SysSettingsId = (SELECT TOP 1 Id FROM SysSettings WHERE Code ='GlobalSearchConfigServiceUrl') 

 

UPDATE SysSettingsValue 

SET TextValue = [specify the URL to the Global Search Indexing Service, use a string of the following type: http:// GS-WEB-INDEXING-SERVICE_URL] 

WHERE SysSettingsId = (SELECT TOP 1 Id FROM SysSettings WHERE Code ='GlobalSearchIndexingApiUrl') 
</pre>
		</div>
		</div>
		</div>
		</div>
		</li>
	</ol></li>
	<li>
	<p>Restart Creatio, flush Redis, and log in to the application.</p>
	</li>
</ol><h3>Settings in Creatio for Oracle DBMS<a class="title-anchor" href="#title-254-16" id="title-254-16"> </a></h3>

<ol><li>
	<p>Toggle the global search (GlobalSearch, GlobalSearch_V2, GlobalSearchRelatedEntityIndexing) feature in Creatio by running the following SQL script:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
CREATE OR REPLACE FUNCTION
generate_uuid return varchar2 is
    v_uuid varchar2(38);
    v_guid varchar2(32);
BEGIN
    v_guid := sys_guid();
    v_uuid := lower(
               '{' ||
                substr(v_guid, 1,8) || '-' ||
                substr(v_guid, 9,4) || '-' ||
                substr(v_guid, 13,4) || '-' ||
                substr(v_guid, 17,4) || '-' ||
                substr(v_guid, 21) ||
                '}'
                );
    RETURN v_uuid;
END;
/

DECLARE
 GS_REIndexingFeature VARCHAR(50) := 'GlobalSearchRelatedEntityIndexing';
 GS_REIndexingFeatureId VARCHAR(38) := NULL;
 GS_REIndexingFeatureId_GUID VARCHAR(38) := generate_uuid();

GlobalSearchFeature VARCHAR(50) := 'GlobalSearch';
  GlobalSearchFeatureId VARCHAR(38) := NULL;
  GlobalSearchFeatureId_GUID VARCHAR(38) := generate_uuid();
  GlobalSearchV2Feature VARCHAR(50) := 'GlobalSearch_V2';
  GlobalSearchV2FeatureId VARCHAR(38) := NULL;
  GlobalSearchV2FeatureId_GUID VARCHAR(38) := generate_uuid();
  allEmployeesId VARCHAR(38) := '{7F3B869F-34F3-4F20-AB4D-7480A5FDF647}';
  State_GlobalSearch VARCHAR(1) := NULL;
  State_GlobalSearchV2 VARCHAR(1) := NULL;
  State_GS_REI VARCHAR(1) := NULL;

BEGIN
  SELECT MAX("Id") INTO GlobalSearchFeatureId FROM "Feature" WHERE "Code" = GlobalSearchFeature AND rownum = 1;
  SELECT MAX("Id") INTO GlobalSearchV2FeatureId FROM "Feature" WHERE "Code" = GlobalSearchV2Feature AND rownum = 1;
SELECT MAX("Id") INTO GS_REIndexingFeatureId FROM "Feature" WHERE "Code" = GS_REIndexingFeature AND rownum = 1;

  SELECT MAX("FeatureState") INTO State_GlobalSearch FROM "AdminUnitFeatureState" WHERE "FeatureId" = GlobalSearchFeatureId AND rownum = 1;
  SELECT MAX("FeatureState") INTO State_GlobalSearchV2 FROM "AdminUnitFeatureState" WHERE "FeatureId" = GlobalSearchV2FeatureId AND rownum = 1;
  SELECT MAX("FeatureState") INTO State_GS_REI FROM "AdminUnitFeatureState" WHERE FeatureId" = GS_REIndexingFeatureId AND rownum = 1;

  IF (GlobalSearchFeatureId IS NULL) THEN
      INSERT INTO "Feature" ("Id", "Name", "Code") VALUES (GlobalSearchFeatureId_GUID, GlobalSearchFeature, GlobalSearchFeature);
      INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchFeatureId_GUID);
    ELSE
      IF (State_GlobalSearch IS NOT NULL) THEN
          UPDATE "AdminUnitFeatureState" SET "FeatureState" = 1 WHERE "FeatureId" = GlobalSearchFeatureId;
        ELSE
         INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchV2FeatureId_GUID);
      END IF;
  END IF;

  IF (GlobalSearchV2FeatureId IS NULL) THEN
      INSERT INTO "Feature" ("Id", "Name", "Code") VALUES (GlobalSearchV2FeatureId_GUID, GlobalSearchV2Feature, GlobalSearchV2Feature);
      INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchV2FeatureId_GUID);
    ELSE
      IF (State_GlobalSearchV2 IS NOT NULL) THEN
          UPDATE "AdminUnitFeatureState" SET "FeatureState" = 1 WHERE "FeatureId" = GlobalSearchV2FeatureId;
        ELSE
          INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchV2FeatureId_GUID);
      END IF;
  END IF;

 IF (GS_REIndexingFeatureId IS NULL) THEN
  INSERT INTO "Feature" ("Id", "Name", "Code") VALUES (GS_REIndexingFeatureId_GUID,GS_REIndexingFeature, GS_REIndexingFeature);
  INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState","FeatureId") VALUES (allEmployeesId, '1', GS_REIndexingFeatureId_GUID);
  ELSE
  IF (State_GS_REI IS NOT NULL) THEN
  UPDATE "AdminUnitFeatureState" SET "FeatureState" = 1 WHERE "FeatureId" =GS_REIndexingFeatureId;
  ELSE
  INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState","FeatureId") VALUES (allEmployeesId, '1', GS_REIndexingFeatureId_GUID);
  END IF;
 END IF;

END;</pre>
	</div>
	</div>
	</div>
	</li>
	<li>
	<p>Set the values of the system settings:</p>

	<p>To do this, run the following script:</p>

	<ol><li>
		<p>“GlobalSearchUrl:” the full path to elasticsearch, including the index. The web-api returns this value if you request it to add site search.</p>

		<p>Example string for Docker: http://[SERVER2_IP_ADDRESS]:83/indexname.</p>

		<p>Example string for Kubernetes: http://[GS-SEARCH-SERVICE_URL] /indexname</p>
		</li>
		<li>
		<p>“GlobalSearchConfigServiceURL:” the global search API URL.</p>

		<p>Default value for Docker: http://[SERVER2_IP_ADDRESS]:81.</p>

		<p>Default value for Kubernetes: http:// [GS_WEB_API_URL].</p>
		</li>
		<li>
		<p>“GlobalSearchIndexingApiUrl:” the instant indexing service URL.</p>

		<p>Default value for Docker: http://[SERVER2_IP_ADDRESS]:82.</p>

		<p>Default value for Kubernetes: http://[GS-WEB-INDEXING-SERVICE_URL].</p>
		</li>
	</ol><div class="SimpleTabContainer" data-itemid="JSON" data-title="JSON" id="Syntax_JSON">
	<div class="code">
	<div class="code__widgets">
	<div class="code__source" data-tab="For Docker">
	<pre class="prettyprint">
DECLARE
  URL_SETTING_ID VARCHAR(38) := NULL;
  CONFIG_URL_SETTING_ID VARCHAR(38) := NULL;
  IND_API_SETTING_ID VARCHAR(38) := NULL;

  URL_VAL_ID VARCHAR(38) := NULL;
  CONFIG_URL_VAL_ID VARCHAR(38) := NULL;
  IND_API_VAL_ID VARCHAR(38) := NULL;

  SYS_ADMIN_UID VARCHAR(38) := '{A29A3BA5-4B0D-DE11-9A51-005056C00008}';

  ES_IND VARCHAR(500) := '[specify the URL to the ElasticSearch index, use a string of the following type: http://[SERVER2_IP_ADDRESS]:83/indexname]';
  CONFIG_URL VARCHAR(500) := '[specify the URL to the Global Search Service, use a string of the following type: http://SERVER2_IP_ADDRESS:81]';
  IND_API_URL VARCHAR(500) := '[specify the URL to the Global Search Indexing Service, use a string of the following type: http://SERVER2_IP_ADDRESS:82]';
BEGIN
  SELECT "Id" INTO URL_SETTING_ID FROM "SysSettings" WHERE "Code" = 'GlobalSearchUrl';
  SELECT "Id" INTO CONFIG_URL_SETTING_ID FROM "SysSettings" WHERE "Code" = 'GlobalSearchConfigServiceUrl';
  SELECT "Id" INTO IND_API_SETTING_ID FROM "SysSettings" WHERE "Code" = 'GlobalSearchIndexingApiUrl';

  SELECT MAX("Id") INTO URL_VAL_ID  FROM "SysSettingsValue" WHERE "SysSettingsId" = URL_SETTING_ID;
  SELECT MAX("Id") INTO CONFIG_URL_VAL_ID  FROM "SysSettingsValue" WHERE "SysSettingsId" = CONFIG_URL_SETTING_ID;
  SELECT MAX("Id") INTO IND_API_VAL_ID  FROM "SysSettingsValue" WHERE "SysSettingsId" = IND_API_SETTING_ID;

  IF (URL_VAL_ID IS NULL)
    THEN
      INSERT INTO "SysSettingsValue"
        ("SysSettingsId", "SysAdminUnitId", "IsDef", "TextValue")
        VALUES
        (URL_SETTING_ID, SYS_ADMIN_UID, '1', ES_IND);
    ELSE
      UPDATE "SysSettingsValue" SET "TextValue" = ES_IND WHERE "SysSettingsId" = URL_SETTING_ID;
  END IF;

  IF (CONFIG_URL_VAL_ID IS NULL)
    THEN
      INSERT INTO "SysSettingsValue"
        ("SysSettingsId", "SysAdminUnitId", "IsDef", "TextValue")
        VALUES
        (CONFIG_URL_SETTING_ID, SYS_ADMIN_UID, '1', CONFIG_URL);
    ELSE
      UPDATE "SysSettingsValue" SET "TextValue" = CONFIG_URL WHERE "SysSettingsId" = CONFIG_URL_SETTING_ID;
  END IF;

  IF (IND_API_VAL_ID IS NULL)
    THEN
      INSERT INTO "SysSettingsValue"
        ("SysSettingsId", "SysAdminUnitId", "IsDef", "TextValue")
        VALUES
        (IND_API_SETTING_ID, SYS_ADMIN_UID, '1', IND_API_URL);
    ELSE
      UPDATE "SysSettingsValue" SET "TextValue" = IND_API_URL WHERE "SysSettingsId" = IND_API_SETTING_ID;
  END IF;
END;</pre>
	</div>

	<div class="code__source" data-tab="For Kubernetes">
	<pre class="prettyprint">
DECLARE 

 URL_SETTING_ID VARCHAR(38) := NULL; 
 CONFIG_URL_SETTING_ID VARCHAR(38) := NULL; 
 IND_API_SETTING_ID VARCHAR(38) := NULL; 

 URL_VAL_ID VARCHAR(38) := NULL; 
 CONFIG_URL_VAL_ID VARCHAR(38) := NULL; 
 IND_API_VAL_ID VARCHAR(38) := NULL; 

 SYS_ADMIN_UID VARCHAR(38) := '{A29A3BA5-4B0D-DE11-9A51-005056C00008}'; 

 ES_IND VARCHAR(500) := '[specify the URL to the ElasticSearch index, use a string of the following type: http://[GS-SEARCH-SERVICE_URL]/indexname]'; 
 CONFIG_URL VARCHAR(500) := '[specify the URL to the Global Search Service, use a string of the following type: http:// GS_WEB_API_URL]'; 
 IND_API_URL VARCHAR(500) := '[specify the URL to the Global Search Indexing Service, use a string of the following type: http:// GS-WEB-INDEXING-SERVICE_URL]'; 

BEGIN 
  SELECT "Id" INTO URL_SETTING_ID FROM "SysSettings" WHERE "Code" = 'GlobalSearchUrl'; 
  SELECT "Id" INTO CONFIG_URL_SETTING_ID FROM "SysSettings" WHERE "Code" = 'GlobalSearchConfigServiceUrl'; 
  SELECT "Id" INTO IND_API_SETTING_ID FROM "SysSettings" WHERE "Code" = 'GlobalSearchIndexingApiUrl'; 

  SELECT MAX("Id") INTO URL_VAL_ID  FROM "SysSettingsValue" WHERE "SysSettingsId" = URL_SETTING_ID; 
  SELECT MAX("Id") INTO CONFIG_URL_VAL_ID  FROM "SysSettingsValue" WHERE "SysSettingsId" = CONFIG_URL_SETTING_ID; 
  SELECT MAX("Id") INTO IND_API_VAL_ID  FROM "SysSettingsValue" WHERE "SysSettingsId" = IND_API_SETTING_ID; 

  IF (URL_VAL_ID IS NULL) 
    THEN 
      INSERT INTO "SysSettingsValue" 
        ("SysSettingsId", "SysAdminUnitId", "IsDef", "TextValue") 
        VALUES 
        (URL_SETTING_ID, SYS_ADMIN_UID, '1', ES_IND); 
    ELSE 
      UPDATE "SysSettingsValue" SET "TextValue" = ES_IND WHERE "SysSettingsId" = URL_SETTING_ID; 
  END IF; 

  IF (CONFIG_URL_VAL_ID IS NULL) 
    THEN 
      INSERT INTO "SysSettingsValue" 
        ("SysSettingsId", "SysAdminUnitId", "IsDef", "TextValue") 
        VALUES 
        (CONFIG_URL_SETTING_ID, SYS_ADMIN_UID, '1', CONFIG_URL); 
    ELSE 
      UPDATE "SysSettingsValue" SET "TextValue" = CONFIG_URL WHERE "SysSettingsId" = CONFIG_URL_SETTING_ID; 
 END IF; 
 IF (IND_API_VAL_ID IS NULL) 
    THEN 
      INSERT INTO "SysSettingsValue" 
        ("SysSettingsId", "SysAdminUnitId", "IsDef", "TextValue") 
      VALUES 
       (IND_API_SETTING_ID, SYS_ADMIN_UID, '1', IND_API_URL); 
    ELSE 
      UPDATE "SysSettingsValue" SET "TextValue" = IND_API_URL WHERE "SysSettingsId" = IND_API_SETTING_ID; 
  END IF; 
END; 	
	</pre>
	</div>
	</div>
	</div>
	</div>
	</li>
	<li>
	<p>Restart Creatio, flush Redis, and log in to the application.</p>
	</li>
</ol><h3>Settings in Creatio for PostgreSQL DBMS<a class="title-anchor" href="#title-254-33" id="title-254-33"> </a></h3>

<ol><li>
	<p>Toggle the global search (GlobalSearch, GlobalSearch_V2, GlobalSearchRelatedEntityIndexing) feature in Creatio by running the following SQL script:</p>

	<div class="code">
	<div class="code__widgets">
	<div class="code__source">
	<pre class="prettyprint">
DO $$

DECLARE 
    GlobalSearchFeature VARCHAR(50) := 'GlobalSearch';
    GlobalSearchFeatureId uuid;
    GlobalSearchV2Feature VARCHAR(50) := 'GlobalSearch_V2';
    GlobalSearchV2FeatureId uuid;
    GS_RelatedEntityIndexingFeature VARCHAR(50) :=   'GlobalSearchRelatedEntityIndexing';
    GS_RelatedEntityIndexingFeatureId uuid;
    allEmployeesId uuid := 'A29A3BA5-4B0D-DE11-9A51-005056C00008';

BEGIN

   SELECT "Id" INTO GlobalSearchFeatureId FROM "Feature"
   WHERE "Code" = GlobalSearchFeature
   LIMIT 1;
   IF (GlobalSearchFeatureId IS NOT NULL)
      THEN
          IF EXISTS (SELECT * FROM "AdminUnitFeatureState" WHERE "FeatureId" = GlobalSearchFeatureId) THEN
             UPDATE "AdminUnitFeatureState" SET "FeatureState" = 1 WHERE "FeatureId" = GlobalSearchFeatureId;
          ELSE
              INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchFeatureId);
          END IF;
   ELSE
       GlobalSearchFeatureId := uuid_generate_v4();
       INSERT INTO "Feature" ("Id", "Name", "Code") VALUES (GlobalSearchFeatureId, GlobalSearchFeature, GlobalSearchFeature);
       INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchFeatureId);
   END IF;

   SELECT "Id" INTO GlobalSearchV2FeatureId FROM "Feature"
   WHERE "Code" = GlobalSearchV2Feature
   LIMIT 1;
   IF (GlobalSearchV2FeatureId IS NOT NULL)
    THEN
        IF EXISTS (SELECT * FROM "AdminUnitFeatureState" WHERE "FeatureId" = GlobalSearchV2FeatureId) THEN
            UPDATE "AdminUnitFeatureState" SET "FeatureState" = 1 WHERE "FeatureId" = GlobalSearchV2FeatureId;
        ELSE
           INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchV2FeatureId);
        END IF;
   ELSE
       GlobalSearchV2FeatureId := uuid_generate_v4();
       INSERT INTO "Feature" ("Id", "Name", "Code") VALUES (GlobalSearchV2FeatureId, GlobalSearchV2Feature, GlobalSearchV2Feature);
       INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState", "FeatureId") VALUES (allEmployeesId, '1', GlobalSearchV2FeatureId);
   END IF;

  SELECT "Id" INTO GS_RelatedEntityIndexingFeatureId FROM "Feature" WHERE "Code" =GS_RelatedEntityIndexingFeature LIMIT 1;
  IF (GS_RelatedEntityIndexingFeatureId IS NOT NULL)
 THEN
    IF EXISTS (SELECT * FROM "AdminUnitFeatureState" WHERE "FeatureId" = GS_RelatedEntityIndexingFeatureId) THEN
UPDATE "AdminUnitFeatureState" SET "FeatureState" = 1 WHERE "FeatureId" = GS_RelatedEntityIndexingFeatureId;
  ELSE
  INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState","FeatureId") VALUES (allEmployeesId, '1', GS_RelatedEntityIndexingFeatureId);
  END IF;
  ELSE
  GS_RelatedEntityIndexingFeatureId := uuid_generate_v4();
  INSERT INTO "Feature" ("Id", "Name", "Code") VALUES (GS_RelatedEntityIndexingFeatureId, GS_RelatedEntityIndexingFeature, GS_RelatedEntityIndexingFeature);
  INSERT INTO "AdminUnitFeatureState" ("SysAdminUnitId", "FeatureState","FeatureId") VALUES (allEmployeesId, '1', GS_RelatedEntityIndexingFeatureId);
  END IF;
END $$;</pre>
	</div>
	</div>
	</div>
	</li>
	<li>
	<p>Set the values of the system settings:</p>

	<ol><li>
		<p>“GlobalSearchUrl:” the full path to ElasticSearch, including the index. The web-api returns this value if you request it to add site search.</p>

		<p>Example string for Docker: http://[SERVER2_IP_ADDRESS]:83/indexname.</p>

		<p>Example string for Kubernetes: http://[GS-SEARCH-SERVICE_URL] /indexname.</p>
		</li>
		<li>
		<p>“GlobalSearchConfigServiceURL:” the global search API URL.</p>

		<p>Default value for Docker: http://[SERVER2_IP_ADDRESS]:81.</p>

		<p>Default value for Kubernetes: http:// [GS_WEB_API_URL].</p>
		</li>
		<li>
		<p>“GlobalSearchIndexingApiUrl:” the instant indexing service URL.</p>

		<p>Default value for Docker: http://[SERVER2_IP_ADDRESS]:82.</p>

		<p>Default value for Kubernetes: http://[GS-WEB-INDEXING-SERVICE_URL].</p>
		</li>
	</ol><p>To do this, run the following script:</p>

	<div class="SimpleTabContainer" data-itemid="JSON" data-title="JSON" id="Syntax_JSON">
	<div class="code">
	<div class="code__widgets">
	<div class="code__source" data-tab="For Docker">
	<pre class="prettyprint">
UPDATE "SysSettingsValue"
SET "TextValue" = [specify the URL to the ElasticSearch index, use a string of the following type: http://[SERVER2_IP_ADDRESS]:83/indexname]
WHERE "SysSettingsId" = (SELECT "Id" FROM "SysSettings" WHERE "Code" = 'GlobalSearchUrl' LIMIT 1 );

UPDATE "SysSettingsValue"
SET "TextValue" = [specify the URL to the Global Search Service, use a string of the following type: http://SERVER2_IP_ADDRESS:81]
WHERE "SysSettingsId" = (SELECT "Id" FROM "SysSettings" WHERE "Code" = 'GlobalSearchConfigServiceUrl' LIMIT 1 );

UPDATE "SysSettingsValue"
SET "TextValue" = [specify the URL to the Global Search Indexing Service, use a string of the following type: http://SERVER2_IP_ADDRESS:82]
WHERE "SysSettingsId" = (SELECT "Id" FROM "SysSettings" WHERE "Code" = 'GlobalSearchIndexingApiUrl' LIMIT 1 );</pre>
	</div>

	<div class="code__source" data-tab="For Kubernetes">
	<pre class="prettyprint">
UPDATE "SysSettingsValue" 

SET "TextValue" = [specify the URL to the ElasticSearch index, use a string of the following type: http://[GS-SEARCH-SERVICE_URL /indexname] 

WHERE "SysSettingsId" = (SELECT "Id" FROM "SysSettings" WHERE "Code" = 'GlobalSearchUrl' LIMIT 1 ); 

 

UPDATE "SysSettingsValue" 

SET "TextValue" = [specify the URL to the Global Search Service, use a string of the following type: http:// [GS_WEB_API_URL ] 

WHERE "SysSettingsId" = (SELECT "Id" FROM "SysSettings" WHERE "Code" = 'GlobalSearchConfigServiceUrl' LIMIT 1 ); 

 

UPDATE "SysSettingsValue" 

SET "TextValue" = [specify the URL to the Global Search Indexing Service, use a string of the following type: http:// [GS-WEB-INDEXING-SERVICE_URL] 

WHERE "SysSettingsId" = (SELECT "Id" FROM "SysSettings" WHERE "Code" = 'GlobalSearchIndexingApiUrl' LIMIT 1 ); 	
	</pre>
	</div>
	</div>
	</div>
	</div>
	</li>
	<li>
	<p>Restart Creatio, flush Redis, and log in to the application.</p>
	</li>
</ol></div>
      
  </div>
<div class="block block-layout-builder block-field-blocknodeuser-documentationfield-linked-link">
  
    
      
  <div class="field field--name-field-linked-link field--type-link field--label-above">
    <div class="field__label">See also</div>
          <div class="field__items">
              <div class="field__item"><a href="https://academy.creatio.com/documents?id=1228">Search records and run commands</a></div>
          <div class="field__item"><a href="https://community.creatio.com/articles/deduplication-and-global-search-faq">Deduplication FAQ</a></div>
          <div class="field__item"><a href="https://academy.creatio.com/docs/requirements/calculator">System requirements calculator</a></div>
              </div>
      </div>

  </div>

    </div>
  </div>

  </div>

</article>

  </div>

  </div>

          </div>
            <div class="region region-after-content">
    <div id="block-adminfeedbackblock-2" class="block block-admin-feedback block-admin-feedback-block">
  
    
      <div id="feedback-message" class="feedback-message"><div id="upper-feedback-content" class="upper-feedback-content"><h2>Did you find this information useful?</h2>
<input class="feedback-btn feedback-btn__yes button js-form-submit form-submit" data-node-id="254" data-feedback="yes" type="submit" name="op" value="Yes" />
<input class="feedback-btn feedback-btn__no button js-form-submit form-submit" data-node-id="254" data-feedback="no" type="submit" name="op" value="No" />
</div>
<form class="admin-feedback-form" data-drupal-selector="admin-feedback-form" action="/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" method="post" id="admin-feedback-form" accept-charset="UTF-8">
  <div id="feedback-msg-result"></div><div class="js-form-item form-item js-form-type-textarea form-type-textarea js-form-item-feedback-message form-item-feedback-message form-no-label">
        <div class="form-textarea-wrapper">
  <textarea id="edit-feedback-msg" data-drupal-selector="edit-feedback-message" name="feedback_message" rows="5" cols="60" class="form-textarea resize-vertical"></textarea>
</div>

        </div>
<p>Email</p><div class="js-form-item form-item js-form-type-email form-type-email js-form-item-feedback-email form-item-feedback-email form-no-label">
        <input data-drupal-selector="edit-feedback-email" type="email" id="edit-feedback-email" name="feedback_email" value="" size="60" maxlength="254" class="form-email" />

        </div>
<input class="feedback-id" data-drupal-selector="edit-feedback-id" type="hidden" name="feedback_id" value="" />
<input class="feedback-btn feedback-btn__send-comment button js-form-submit form-submit" data-drupal-selector="edit-feedback-send" type="submit" id="edit-feedback-send" name="op" value="Submit" />
<input autocomplete="off" data-drupal-selector="form-mk5rkwfqt2stxwn0gcj9xij-ywprjmijngyzuwbidim" type="hidden" name="form_build_id" value="form-Mk5RkwfqT2stxWN0GCJ9XIJ_YWPrjMIjNgYZUwBIdiM" />
<input data-drupal-selector="edit-admin-feedback-form" type="hidden" name="form_id" value="admin_feedback_form" />

</form>
</div>

  </div>

  </div>

        </div>

                  <aside class="creatio-sidebar creatio-sidebar_first" role="complementary">
              <div class="region region-sidebar-first">
    <div id="block-documentationnaviagtion" class="block block-ts-nav block-ts-nav-doc-nav">
  
    
      <div class="ts-nav-block"><a href="/docs/" class="ts-nav-block__link">Documentation</a><div class="ts-nav-block__title">User documentation</div>
</div>
<div class="ts-nav-container"><ul class="ts-nav-menu"><li class="ts-nav-menu__item">
  <a href="/docs/user/nocode_platform" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">No-code platform&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/platform_basics" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Platform basics&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/crm_tools" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">CRM tools&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/customization_tools" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Customization tools&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/bpm_tools" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">BPM tools&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/marketing_tools" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Marketing tools&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/sales_tools" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Sales tools&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/service_tools" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Service tools&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/setup_and_administration" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Administration&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment" class="ts-nav-menu__link ts-nav-menu__link_expanded ts-nav-menu__link_open" hreflang="en">On-site deployment&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
      <ul class="ts-nav-menu__children">
      <li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/system_requirements" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">System requirements&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/general_deployment_procedure" class="ts-nav-menu__link" hreflang="en">General deployment procedure</a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/database_server" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Database server&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/caching_server" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Caching server&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/application_server_on_linux" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Application server on Linux&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/application_server_on_windows" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Application server on Windows&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/deployment_additional_setup" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Additional setup&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/containerized_components" class="ts-nav-menu__link ts-nav-menu__link_expanded ts-nav-menu__link_open" hreflang="en">Сontainerized components&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
      <ul class="ts-nav-menu__children">
      <li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/containerized_components/global_search_shortcut" class="ts-nav-menu__link ts-nav-menu__link_active ts-nav-menu__link_open" hreflang="en">Global search</a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/containerized_components/global_search_faq" class="ts-nav-menu__link" hreflang="en">Global search FAQ</a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/containerized_components/bulk_duplicate_search_shortcut" class="ts-nav-menu__link" hreflang="en">Bulk duplicate search</a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/containerized_components/machine_learning_service_shortcut" class="ts-nav-menu__link" hreflang="en">Machine learning service</a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/containerized_components/exchange_listener" class="ts-nav-menu__link" hreflang="en">Email Listener</a>
  </li>

    </ul>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/on_site_deployment/deployment_faq" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">FAQ&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>

    </ul>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/more_apps" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">More apps&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
<li class="ts-nav-menu__item">
  <a href="/docs/user/finance_and_banking" class="ts-nav-menu__link ts-nav-menu__link_expanded" hreflang="en">Finance and banking&nbsp;<span class="ts-nav-menu__link__arrow"></span></a>
  </li>
</ul>
</div>

  </div>

  </div>

            <div class="creatio-sidebar__toggle"></div>
          </aside>
        
                  <aside class="creatio-sidebar creatio-sidebar_second" role="complementary">
              <div class="region region-sidebar-second">
    <div id="block-example" class="block block-ts-nav block-ts-nav-page-nav">
  
    
        <div class="ts-nav-title">Global search</div>
<div class="ts-nav-page">
      <ul class="ts-nav-page__list">
                                                <li class="ts-nav-page__item ts-nav-page__item_expanded ts-nav-page__item_open"><a href="/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" class="ts-nav-page__link ts-nav-page__link_expanded ts-nav-page__link_active">Global search&nbsp;<span class="ts-nav-page__link-arrow"></span></a></li>
          </ul>
  </div>

  </div>
<div id="block-adminfeedbackblock" class="block block-admin-feedback block-admin-feedback-block">
  
    
      <div id="feedback-message" class="feedback-message"><div id="upper-feedback-content" class="upper-feedback-content"><h2>Did you find this information useful?</h2>
<input class="feedback-btn feedback-btn__yes button js-form-submit form-submit" data-node-id="254" data-feedback="yes" type="submit" name="op" value="Yes" />
<input class="feedback-btn feedback-btn__no button js-form-submit form-submit" data-node-id="254" data-feedback="no" type="submit" name="op" value="No" />
</div>
<form class="admin-feedback-form" data-drupal-selector="admin-feedback-form-2" action="/docs/user/on_site_deployment/containerized_components/global_search_shortcut/global_search" method="post" id="admin-feedback-form--2" accept-charset="UTF-8">
  <div id="feedback-msg-result"></div><div class="js-form-item form-item js-form-type-textarea form-type-textarea js-form-item-feedback-message form-item-feedback-message form-no-label">
        <div class="form-textarea-wrapper">
  <textarea id="edit-feedback-msg" data-drupal-selector="edit-feedback-message" name="feedback_message" rows="5" cols="60" class="form-textarea resize-vertical"></textarea>
</div>

        </div>
<p>Email</p><div class="js-form-item form-item js-form-type-email form-type-email js-form-item-feedback-email form-item-feedback-email form-no-label">
        <input data-drupal-selector="edit-feedback-email" type="email" id="edit-feedback-email--2" name="feedback_email" value="" size="60" maxlength="254" class="form-email" />

        </div>
<input class="feedback-id" data-drupal-selector="edit-feedback-id" type="hidden" name="feedback_id" value="" />
<input class="feedback-btn feedback-btn__send-comment button js-form-submit form-submit" data-drupal-selector="edit-feedback-send" type="submit" id="edit-feedback-send--2" name="op" value="Submit" />
<input autocomplete="off" data-drupal-selector="form-ie7olqn27myx2yvnjcuppcai7f1utyuknaw5sxhxnjq" type="hidden" name="form_build_id" value="form-IE7OLQn27mYx2yVNJcuPPcai7f1utYUKnAW5SxhxNJQ" />
<input data-drupal-selector="edit-admin-feedback-form-2" type="hidden" name="form_id" value="admin_feedback_form" />

</form>
</div>

  </div>

  </div>

          </aside>
              </main>
    </div>
  </div>

  <footer role="contentinfo">
    <div class="creatio-region creatio-region_footer">
      <div class="creatio-container">
          <div class="region region-footer">
    <div id="block-footer" class="block block-simple-block block-simple-blockfooter">
  
    
      <div class="footer">
<div class="footer-left">
<ul class="footer-socials"><li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_fb" href="https://www.facebook.com/CreatioCompany" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_in" href="https://www.linkedin.com/company/creatioglobal" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_yt" href="https://www.youtube.com/c/creatio" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_tw" href="https://www.twitter.com/Creatio_Global" target="_blank"> </a></li>
	<li class="footer-socials__item"><a class="footer-socials__link footer-socials__link_ow" href="https://www.owler.com/company/Creatio" target="_blank"> </a></li>
</ul></div>

<div class="footer-contact">
<div class="footer-title">Connect with us</div>

<div class="footer-content">
<div class="footer-items">
<div class="footer-item"><a class="footer__link footer__link_phone" href="tel:+16177657997">USA: +1 617 765 7997</a></div>

<div class="footer-item"><a class="footer__link footer__link_phone" href="tel:+442033840040">UK: +44 20 3384 0040</a></div>

<div class="footer-item"><a class="footer__link footer__link_phone" href="tel:+61261452888">Australia: +61 261 452 888</a></div>
</div>

<div class="footer-items">
<div class="footer-item"><a class="footer__link footer__link_email" href="mailto:info@creatio.com">info@creatio.com</a></div>

<div class="footer-item"><a class="footer__link footer__link_email" href="mailto:support@creatio.com">support@creatio.com</a></div>
</div>
</div>
</div>
</div>

  </div>

  </div>

      </div>
    </div>
    <div class="creatio-region creatio-region_bottom">
      <div class="creatio-container">
          <div class="region region-bottom">
    <div id="block-allrightsreserved" class="block block-simple-block block-simple-blockfooter-bottom">
  
    
      <p>© 2023 Creatio. All rights reserved.  |  <a href="https://www.creatio.com/privacy-policy" target="_blank">Privacy Policy</a></p>

  </div>

  </div>

      </div>
    </div>
  </footer>
</div>
<div class="creatio-bg"></div>


  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/docs\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/254","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"ajaxPageState":{"libraries":"admin_feedback\/admin_feedback_block,admin_feedback\/admin_feedback_css,ckeditor_images_gallery\/images_gallery_style,classy\/base,classy\/messages,classy\/node,core\/internal.jquery.form,core\/normalize,creatio\/creatio.lists,creatio\/fancybox,creatio\/global,layout_discovery\/onecol,system\/base,ts_datalayer\/datalayer,ts_doc\/doc_version,ts_feedback\/ts_feedback,ts_nav\/breadcrumb,ts_nav\/doc_nav,ts_nav\/page_nav,ts_title_anchor\/ts_title_anchor","theme":"creatio","theme_token":null},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true,"\/docs\/user\/on_site_deployment\/containerized_components\/global_search_shortcut\/global_search?ajax_form=1":true},"admin_feedback":{"yes_response":"Thank you for the feedback!","no_response":"Thank you for the feedback!","custom_text_response_on_no":{"value":"","format":"full_html"},"feedback_prompt_on_yes":true,"feedback_prompt_on_no":true,"feedback_enable_predefined_answers":false,"feedback_prompt":"How can we improve it?"},"ajax":{"edit-feedback-send--2":{"callback":"::validateFeedbackMsg","event":"mousedown","keypress":true,"prevent":"click","url":"\/docs\/user\/on_site_deployment\/containerized_components\/global_search_shortcut\/global_search?ajax_form=1","dialogType":"ajax","submit":{"_triggering_element_name":"op","_triggering_element_value":"Submit"}},"edit-feedback-send":{"callback":"::validateFeedbackMsg","event":"mousedown","keypress":true,"prevent":"click","url":"\/docs\/user\/on_site_deployment\/containerized_components\/global_search_shortcut\/global_search?ajax_form=1","dialogType":"ajax","submit":{"_triggering_element_name":"op","_triggering_element_value":"Submit"}}},"user":{"uid":0,"permissionsHash":"9c2367dfcaba0fa15f0375f97aed64e146c908cee68508d13b79e3ee80e5162d"}}</script>
<script src="/docs/sites/en/files/js/js_3rEjKUXEc9WBp4Po5ZBPnElYTEDdJ9XC1_QLr1MBi6Q.js"></script>


    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <g id="svg-copy" class="svg-icon svg-icon_copy">
        <path d="M15.111,18H1.889A1.848,1.848,0,0,1,0,16.2V3.6A1.848,1.848,0,0,1,1.889,1.8H5.837a2.87,2.87,0,0,1,5.326,0h3.948A1.848,1.848,0,0,1,17,3.6V16.2A1.848,1.848,0,0,1,15.111,18ZM3.777,12.6v1.8h6.611V12.6Zm0-3.6v1.8h9.445V9Zm0-3.6V7.2h9.445V5.4ZM8.5,1.8a.924.924,0,0,0-.944.9.945.945,0,0,0,1.889,0A.924.924,0,0,0,8.5,1.8Z"/>
      </g>

      <g id="svg-prev" class="svg-icon svg-icon_arrow">
        <path d="M5.488,12.779,0,6.39,5.488,0" transform="translate(1 0.652)"/>
      </g>

      <g id="svg-next" class="svg-icon svg-icon_arrow">
        <path d="M0,12.779,5.488,6.39,0,0" transform="translate(0.759 0.652)"/>
      </g>
    </svg>
  </body>
</html>
